<div class="max-w-xl mx-auto bg-slate-800 p-6 rounded-lg shadow-md">
  <h2 class="text-2xl font-bold text-yellow-400 mb-4">‚öôÔ∏è Create Component</h2>

  <!-- Form -->
  <form (ngSubmit)="addComponent()" class="space-y-4">
    <div>
      <label class="block text-sm mb-1">Component Name</label>
      <input [(ngModel)]="componentName" name="componentName" type="text"
             class="w-full px-3 py-2 rounded-md bg-slate-700 text-white focus:ring-2 focus:ring-yellow-400"
             placeholder="Enter component name" required>
    </div>

    <div>
      <label class="block text-sm mb-1">Select Menu</label>
      <select [(ngModel)]="selectedMenuId" (change)="filterPages()" name="menuId"
              class="w-full px-3 py-2 rounded-md bg-slate-700 text-white focus:ring-2 focus:ring-yellow-400" required>
        <option [ngValue]="null" disabled>Select menu</option>
        <option *ngFor="let menu of menus" [ngValue]="menu.id">{{ menu.name }}</option>
      </select>
    </div>

    <div>
      <label class="block text-sm mb-1">Select Page</label>
      <select [(ngModel)]="selectedPageId" name="pageId"
              class="w-full px-3 py-2 rounded-md bg-slate-700 text-white focus:ring-2 focus:ring-yellow-400" required>
        <option [ngValue]="null" disabled>Select page</option>
        <option *ngFor="let page of filteredPages" [ngValue]="page.id">{{ page.name }}</option>
      </select>
    </div>

    <button *ngIf="pagePermissionService.hasComponent('Page Permission', 'Create Component','Add')" type="submit"
            class="w-full bg-yellow-500 hover:bg-yellow-600 text-slate-900 font-bold py-2 rounded-md transition">
      Add Component
    </button>
  </form>
</div>

<!-- Component List -->
<div class="max-w-2xl mx-auto mt-6 bg-slate-800 p-6 rounded-lg shadow-md" *ngIf="components.length > 0">
  <h3 class="text-xl font-semibold text-yellow-400 mb-3">üìã Component List</h3>

  <table class="w-full text-sm border border-slate-700 rounded-md overflow-hidden">
    <thead>
      <tr class="bg-slate-700 text-yellow-300">
        <th class="py-2 px-3 text-left">Menu Name</th>
        <th class="py-2 px-3 text-left">Page Name</th>
        <th class="py-2 px-3 text-left">Component Name</th>
        <th class="py-2 px-3 text-center">Action</th>
      </tr>
    </thead>
    <tbody>
     <tr *ngFor="let comp of components">
        <td class="py-2 px-3">{{ comp.menuName }}</td>
        <td class="py-2 px-3">{{ comp.pageName }}</td>
        <td class="py-2 px-3">{{ comp.name }}</td>
        <td class="py-2 px-3 text-center">
            <div class="d-flex justify-content-center gap-2">
               <button *ngIf="pagePermissionService.hasComponent('Page Permission', 'Create Component','Delete')" title="Delete component"
                        class="px-2 py-1 rounded-md text-red-600 border border-red-600 hover:bg-red-600 hover:text-white transition"
                        (click)="openDeleteModal(comp.id)">
                <i class="bi bi-trash"></i>
                </button>


            </div>
        </td>
        </tr>


    </tbody>
  </table>
</div>
<!-- Delete Confirmation Modal (always on top) -->
<!-- Delete Confirmation Modal -->
<app-confirm-delete
  [show]="showDeleteModal"
  [itemName]="selectedUserName"
  (cancel)="cancelDelete()"
  (confirm)="confirmDelete()">
</app-confirm-delete>